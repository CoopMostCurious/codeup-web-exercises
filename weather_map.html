<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Weather Map</title>
</head>
<body>
    <h1>Weather for San Antonio</h1>
    <div id="today">
        <h2>Today</h2>
    </div>
    <div id="tomorrow">
        <h2>Tomorrow</h2>
    </div>
    <div id="day-after-tomorrow">
        <h2>Day After Tomorrow</h2>
    </div>
</body>
<script src="js/jquery-2.2.4.min.js"></script>
<script>
    (function(){
        $.get("http://api.openweathermap.org/data/2.5/forecast", {
            APPID: "cb998e047c25d215f80ec8cae5eea5fe",
            id:    4726206,
            units: "imperial"
        }).done(function(data) {
            var response = data.list;
            console.log(response);
            console.log(response[0].weather[0].main);
            today();
            tomorrow();
            dayAfterTomorrow();
            // for today
            function today() {
                var day = $('#today');
                var temps = [];
                var humidities = [];
                var winds = [];
                var pressures = [];
                var low = 0;
                var high = 0;
                for (var i = 0; i < 8; i++) {
                    temps.push(response[i].main.temp);
                    humidities.push(response[i].main.humidity);
                    winds.push(response[i].wind.speed);
                    pressures.push(response[i].main.pressure);
                }
                low = parseInt(Math.min(...temps));
                high = parseInt(Math.max(...temps));
                var humidity = 
                day.append('<p>Low ' + low + '</p>');
                day.append('<p>High ' + high + '</p>');
                day.append('<p>' + '' + '</p>');
                day.append('<p>' + response[0].weather[0].main + '</p>');
                day.append('<p>' + response[0].weather[0].description + '</p>');
                day.append('<p>Humidity ' + processAverages(humidities) + '</p>');
                day.append('<p>Avg Wind Speed: ' + processAverages(winds) + '</p>'); 
                // pressure
                day.append('<p>Pressure: ' + processAverages(pressures) + '</p>');
            }
            // for tomorrow
            function tomorrow() {
                var day = $('#tomorrow');
                var temps = [];
                var humidities = [];
                var winds = [];
                var pressures = [];
                var low = 0;
                var high = 0;
                for (var i = 8; i < 16; i++) {
                    temps.push(response[i].main.temp);
                    humidities.push(response[i].main.humidity);
                    winds.push(response[i].wind.speed);
                    pressures.push(response[i].main.pressure);
                }
                low = parseInt(Math.min(...temps));
                high = parseInt(Math.max(...temps));
                day.append('<p>Low ' + low + '</p>');
                day.append('<p>High ' + high + '</p>');
                day.append('<p>' + response[8].weather[0].main + '</p'); 
                day.append('<p>' + response[8].weather[0].description + '</p>');
                day.append('<p>Humidity ' + processAverages(humidities) + '</p>');
                day.append('<p>Avg Winds: ' + processAverages(winds) + '</p>');
                day.append('<p>Pressure: ' + processAverages(pressures) + '</p>');
            }
            // for the next
            function dayAfterTomorrow() {
                var day = $('#day-after-tomorrow');
                var temps = [];
                var humidities = [];
                var winds = [];
                var pressures = [];
                var low = 0;
                var high = 0;
                for (var i = 16; i < 24; i++) {
                    temps.push(response[i].main.temp);
                    humidities.push(response[i].main.humidity);
                    winds.push(response[i].wind.speed);
                    pressures.push(response[i].main.pressure);
                }
                low = parseInt(Math.min(...temps));
                high = parseInt(Math.max(...temps));
                day.append('<p>Low ' + low + '</p>');
                day.append('<p>High ' + high + '</p>');
                day.append('<p>' + response[16].weather[0].main + '</p');
                day.append('<p>' + response[16].weather[0].description + '</p>')
                day.append('<p>Humidity ' + processAverages(humidities) + '</p>');
                day.append('<p>Avg Wind: ' + processAverages(winds) + '</p>');
                day.append('<p>Pressure: ' + processAverages(pressures) + '</p>');
            }
            function processAverages(array) {
                var sum = 0;
                for (var i = 0; i < array.length; i++) {
                    sum += parseInt(array[i], 10);
                }
                return parseInt(sum / array.length);
            }
            console.log('Done.');
            }
        );
    })();
</script>
</html>